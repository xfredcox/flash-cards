<polymer-element name="flash-cards" attributes="data">
  <template>

      <style>
       .noselect {
	   -webkit-touch-callout: none;
	   -webkit-user-select: none;
	   -khtml-user-select: none;
	   -moz-user-select: none;
	   -ms-user-select: none;
	   user-select: none;
       }
       
       #container {
	   max-width: 400px;
	   height: 400px;
	   padding: 0px;
	   margin: 20px;
	   border: solid black 1px;
       }

       #header {
	   width: 100%;
	   height: 12px;
	   font-size: 10px;
	   background-color: steelblue;
	   color: #eee;
	   text-align: center;
	   border: solid black 1px;
       }
       #question {
	   width: 90%;
	   height: 100px;
	   border: solid black 1px;
	   text-align: center;
	   line-height: 100px;
	   padding-left: 5%;
	   padding-right: 5%;	   	   	   
       }
       #answer {
	   width: 90%;
	   height: 283px;
	   border: solid black 1px;
	   text-align: center;
	   line-height: 283px;
	   padding-left: 5%;
	   padding-right: 5%;	   	   
       }
       .middle {
	   display: inline-block;
	   vertical-align: middle;
	     line-height: normal;  
       }
       
      </style>
      
      <div id="container" class="noselect">

	  <div id="header">
	      {{name}} - {{N ? n + 1 : n}}/{{N}}
	  </div>

	  <div id="workspace" on-click="{{next}}">
	      <div id="question">
		  <span class="middle">{{question}}</span>
	      </div>

	      <div id="answer">
		  <span class="middle" hidden?="{{!showState}}">{{answer}} </span>
	      </div>	 

	  </div>
      </div>

      
  </template>
  <script>
    (function () {
      'use strict';

	Polymer({
	    log: true,
	    computed: {
		"N": "cards.length",
	    },
	    n: 0,
	    cards: [],
	    name: "Flashcards",
	    showState: false,
	    dataChanged: function () {
		this.log ? console.log("<flash-cards> dataChanged *start*") : null;

		// Parse if necessary
		if (typeof this.data == "string") {
		    var _data = JSON.parse(this.data);
		} else {
		    var _data = this.data;
		}
		
		// Reset Values
		this.name = _data && _data.name ? _data.name : this.name;
		this.cards = _data && _data.cards ? _data.cards : this.cards;
		this.showState = false;
		this.n = 0;
		this.nChanged();
	
		this.log ? console.log("<flash-cards> dataChanged *finish*") : null;
	    },

	    nChanged: function () {
		this.log ? console.log("<flash-cards> nChanged *start*") : null;

		// Reset Values
		this.showState = false;
		this.question = this.cards[this.n].question;
		this.answer = this.cards[this.n].answer;		

		this.log ? console.log("<flash-cards> nChanged *finish*") : null;
	    },
	    next: function () {

		if (this.showState) {
		    if (this.n + 1 == this.N) {
			this.n = 0;
		    } else {
			this.n += 1;
		    }
		} else {
		    this.showState = true;
		}
	    },
	    ready: function () {
		this.log ? console.log("<flash-cards> ready *start*") : null;


		this.log ? console.log("<flash-cards> ready *finish*") : null;
	    },

	    domReady: function () {
		this.log ? console.log("<flash-cards> domReady *start*") : null;

		

		this.log ? console.log("<flash-cards> domReady *finish*") : null;
	    },	    	    
	})
    })()
  </script>
</polymer-element>
